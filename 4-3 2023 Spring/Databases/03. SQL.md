# What would you do if you create a database language?
- **DDL**
	- Create the database.
- **DML**
	- Insert, update, delete in to the database.
	- Query the database.
- ![[Pasted image 20230410150037.png|200]]
## DDL
//Create Database
CREATE DATABASE \[Database Name\]
GO //Executes code prior to this line
USE \[Database Name\] //Activates the Database
GO //(Microsoft SQL Server Manager is like a interpreter type beat. It will execute only up to GO.)

//Create Table
CREATE TABLE \[Table Name]\ (
	\[Column Name\] \[Data Type\] \[Constraint\]
)
GO

//Drop whole Table
DROP TABLE \[Table Name]
GO

//Drop whole Database
DROP DATABASE \[Database Name\]
GO

//Insert
INSERT INTO \[Table Name\] 
	(\[List of Row Values\])
GO

//Insert w/ Custom Column Order
INSERT INTO \[Table Name\]
	(\[List of Column Names\]) //If length < table's length, those columns will be inserted null
	(\[List of Row Values\])
GO

//Insert via Query
INSERT INTO \[Table Name\]
	(\[Query that we haven't learned yet\])
GO

//Deleting Rows by Condition
DELETE FROM \[Table Name\]
	WHERE \[Condition (e.g. GPA = 4.0)\]
GO

//Update Rows if Condition is met
UPDATE \[Table Name\]
	SET \[Column Name] = \[Value]
	WHERE \[Condition\]
GO

//Alter (allows adding or dropping columns)
ALTER \[Table Name\]
# Common Constraints
- NULL vs NOT NULL
- PRIMARY KEY
	- Implicitly NOT NULL
	- Only 1, but could be composite of attributes
- UNIQUE
	- Can't have repeats
- IDENTITY
	- User can't enter values and a way to create an index.
	- e.g. INDENTITY(1,1) means start at 1, count up by 1.
- DEFAULT
	- Makes value optional and will default to whatever the constraint is set as.
- FOREIGN KEY is a constraint that links attributes across tables.
	- Must be referencing a PIMARY KEY of another table.
	- An insert will fail if a table with the FOREIGN KEY constraint can't find the referenced table with the same instance key. 
	- ON UPDATE & ON DELETE of master key value
		- DEFAULT (disallow changing master key values)
		- NO ACTION (will allow master key value change)
		- CASCADE (master key value changes foreign key link too)
		- DELETE (master key value change will delete previously linked child instances linked)
- Constraints have names given on creation. This allows editing constraints later by referencing their names.
- CHECK
	- Constraint that can check condition on the whole table, or just a row/column, or even just a cell.
- ASSERTION
	- A powerful but expensive function-like condition where users can uses queries.
		- ![[Pasted image 20230412151728.png|200]]
	- However, most commercial SQL services disallows it, and provides TRIGGERs as a lightweight replacement.
## NULL Semantics
- In Microsoft SQL Server, every comparison or operation with NULL returns false.
	- Even if NULL == NULL returns false.
# Example: View Ridge Gallery Database Design  
- ![[Pasted image 20230410150449.png|550]]
	- (FK) stands for Foreign Key, which means the Key come from someone else.
## Create Table: ARTIST
 ![[Pasted image 20230410151040.png|500]]
 - Char(25) is a String with 25 chars.
	- But VarChar(25) allows dynamically allocated Strings from length 0 to 25. 
		- nVarChar(25) stores Unicode
	- Char(max) works too, but you have to check the current version's max since it changes.
- Blob (Binary Large Object) is another good data type. 
	- You can store image, video, etc.
- Some Constraints were created in the value lines, while others (ones that required multiple constraints) were created afterwards.
## Create Table: WORK
 ![[Pasted image 20230412134546.png|530]]
- "\[Description\]" is because Description is already a keyword, and the brackets is escaping it.
- DEFAULT constraint is demonstrated here.
- WorkID is autogenerated from 500 and counting up by 1.
- FOREIGN KEY demonstrated here
	- ArtistID was from ARTIST. If we insert here with a ArtistID that doesn't exist in ARTIST, it'll fail.
## Create Table: ARTIST but w/ CHECK Constraints
![[Pasted image 20230412134957.png|550]]
- NationalityValues
	- Only allows user to input Nationality if in allowed values.
	- This is an alternative design to a master table with FOREIGN KEY link.
- BirthValuesCheck
	- Checks inequality between cells in a row.
	- Entering NULL will not be CHECKed.
- ValidBirthYear & ValidDeathYear
	- Uses regex to define valid numeric inputs.
# ALTER Constraint
- ALTER changes table after creation
	- You can change the structure, properties, constraints.
## Example
![[Pasted image 20230412145546.png|350]]
- ALTER the ASSIGNMENT table, and add a new FOREIGN KEY Constraint
- If the existing records violates this new Constraint, it will not let you add it.
## Examples
- Add a column
	- ALTER TABLE CUSTOMER ADD MyColumn Char(5) NULL;
- Drop a column
	- ALTER TABLE CUSTOMER DROP COLUMN MyColumn;
- Drop Constraint
	- ALTER TABLE CUSTOMER  
		DROP CONSTRAINT MyConstraint;  
# Removing Table
- DROP TABLE \[Table Name\];
- Constraints can restrict DROP
	- ![[Pasted image 20230412150127.png|250]]
	- So, remove the Constraint or whatever causing it first to DROP it.
## Emptying Table
- TRUNCATE TABLE \[Table Name\];
# Inserting Data
- (Already covered above)
- ![[Pasted image 20230412150333.png|250]]
## Bulk Insert
- With Select
	- ![[Pasted image 20230412150618.png|250]]
		- That's a SELECT query. It queries and what returns will get inserted.
- Without Select
	- ![[Pasted image 20230412150647.png|300]]
# Update
- Example Update 1 Tuple
	- ![[Pasted image 20230412150738.png|250]]
		- WHERE targets the only one CUSTOMER with ID 1000.
- Example, updates all tuples with City = ‘Denver’
	- ![[Pasted image 20230412150807.png|200]]
		- WHERE targets all 'Denver' instances
# Delete
- Example Deleting a unique single instance
	- ![[Pasted image 20230412151234.png|200]]
	- Omitting WHERE clause will delete all rows, equivalent to TRUNCATE.
